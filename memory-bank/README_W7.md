# üè† –ü–∞—Ä—Å–µ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏–π Baza-Winner.ru

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞, –∞–Ω–∞–ª–∏–∑–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —Å –Ω–æ–≤–æ–≥–æ MLS API baza-winner.ru –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL.

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ **–ù–æ–≤—ã–π MLS API**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: ads_w7 —Å –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (30+ –ø–æ–ª–µ–π)  
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 10 –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
- ‚úÖ **–î–æ—Å—Ç—É–ø–Ω–æ**: ~88,817 –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ API
- üöÄ **–ì–æ—Ç–æ–≤ –∫ –º–∞—Å—Å–æ–≤–æ–º—É —Å–±–æ—Ä—É**

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ —Å–∫—Ä–∏–ø—Ç—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|----------|--------|
| `flexible_collector.py` | **–ì–õ–ê–í–ù–´–ô**: –ì–∏–±–∫–∏–π —Å–±–æ—Ä—â–∏–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ | üöÄ –ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É |
| `save_to_ads_w7.py` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL (—Ç–∞–±–ª–∏—Ü–∞ ads_w7) | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |


### üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_owner_detection.py` | –¢–µ—Å—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ vs –∞–≥–µ–Ω—Ç–æ–≤ |
| `test_owner_parsing.py` | –¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–º–µ–Ω —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ |
| `test_10_ads_save.py` | –¢–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ |
| `test_new_fields.py` | –¢–µ—Å—Ç –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π (–ø–æ—Ç–æ–ª–∫–∏, –±–∞–ª–∫–æ–Ω—ã –∏ —Ç.–¥.) |

### üìä –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `.env` | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ API —Ç–æ–∫–µ–Ω—ã |
| `flexible_collector.py` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–∏—Å–∫–∞ |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –û—Å–Ω–æ–≤–Ω–æ–π —Å–±–æ—Ä —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏

```bash
# –°–±–æ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (1–∫ –∫–≤–∞—Ä—Ç–∏—Ä—ã –∑–∞ 180 –¥–Ω–µ–π)
python flexible_collector.py

# –ü–æ–∏—Å–∫ —Å—Ç—É–¥–∏–π –∑–∞ 30 –¥–Ω–µ–π
python flexible_collector.py --days 30 --rooms 0

# –ü–æ–∏—Å–∫ —Å—Ç—É–¥–∏–π –∏ 1–∫ –∫–≤–∞—Ä—Ç–∏—Ä –∑–∞ 7 –¥–Ω–µ–π
python flexible_collector.py --days 7 --rooms 0,1

# –ü–æ–∏—Å–∫ 2–∫ –∏ 3–∫ –∫–≤–∞—Ä—Ç–∏—Ä –∑–∞ 90 –¥–Ω–µ–π
python flexible_collector.py --days 90 --rooms 2,3

# –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ —Å–Ω—è—Ç—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∑–∞ 30 –¥–Ω–µ–π
python flexible_collector.py --inactive --days 30

# –ü–æ–∏—Å–∫ —Å–Ω—è—Ç—ã—Ö 1-–∫–æ–º–Ω–∞—Ç–Ω—ã—Ö –∫–≤–∞—Ä—Ç–∏—Ä –∑–∞ 7 –¥–Ω–µ–π
python flexible_collector.py --inactive --days 7 --rooms 1

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏
python flexible_collector.py --help
```

### 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|----------|---------|
| `--days` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –ø–æ–∏—Å–∫–∞ | `--days 30` |
| `--rooms` | –ö–æ–º–Ω–∞—Ç—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (0=—Å—Ç—É–¥–∏–∏) | `--rooms 0,1,2` |
| `--inactive` | –ò—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–Ω—è—Ç—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è | `--inactive` |

### 3. –¢–µ—Å—Ç–æ–≤—ã–π —Å–±–æ—Ä (10 –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤)

```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ 10 –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤
python save_owners_10.py
```

### 4. –ì–∏–±–∫–∏–π —Å–±–æ—Ä —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ)

```python
from flexible_collector import FlexibleCollector

collector = FlexibleCollector()

# –ü—Ä–∏–º–µ—Ä: 1-–∫–æ–º–Ω–∞—Ç–Ω—ã–µ –æ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –≤ —Å—Ç–∞—Ä–æ–π –ú–æ—Å–∫–≤–µ
result = await collector.search(
    location="moscow_old_only",      # –ú–æ—Å–∫–≤–∞ –±–µ–∑ –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥–∞ –∏ –ù–æ–≤–æ–π –ú–æ—Å–∫–≤—ã
    rooms=[1],                       # 1-–∫–æ–º–Ω–∞—Ç–Ω—ã–µ (—Å–ø–∏—Å–æ–∫)
    building_type="old_only",        # –¢–æ–ª—å–∫–æ –≤—Ç–æ—Ä–∏—á–∫–∞
    seller_type="owner_only",        # –¢–æ–ª—å–∫–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏
    size=100                         # –†–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏
)
```

## ‚öôÔ∏è –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

**‚ùó –í–ê–ñ–ù–û**: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `WSCG`:

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://w7.baza-winner.ru –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –µ—Å—Ç—å —É –≤–∞—Å)
3. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Network**
4. –°–¥–µ–ª–∞–π—Ç–µ –ª—é–±–æ–π –ø–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
5. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/items/_search.json`
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä: `wscg=–Ω–æ–≤–æ–µ_–∑–Ω–∞—á–µ–Ω–∏–µ`

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–û—Ç–∫—Ä–æ–π—Ç–µ `flexible_collector.py` (—Å—Ç—Ä–æ–∫–∏ 15-22) –∏ –æ–±–Ω–æ–≤–∏—Ç–µ:

```python
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
ACCESS_TOKEN = "NN9m23AJSoREFwS2PMpsxHp4GRSuzp2227BXH0OyTBPpR0Rk39FQCScADwu5g0AE"  # –ù–µ –º–µ–Ω—è–µ—Ç—Å—è
USER_ID = "594465"  # –ù–µ –º–µ–Ω—è–µ—Ç—Å—è
ORDER_ID = "813ea25b-faae-4de4-9597-840f80f42495"  # –ù–µ –º–µ–Ω—è–µ—Ç—Å—è
WSCG = "–ù–û–í–û–ï_–ó–ù–ê–ß–ï–ù–ò–ï_WSCG"  # ‚Üê –û–ë–ù–û–í–õ–Ø–ô–¢–ï –ï–ñ–ï–î–ù–ï–í–ù–û
```

**–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: `WSCT` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞.

## üéõÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ `flexible_collector.py`:

**üìç –õ–æ–∫–∞—Ü–∏—è (`location`):**
- `moscow_all` - –≤—Å—è –ú–æ—Å–∫–≤–∞ –≤–∫–ª—é—á–∞—è –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥ –∏ –ù–æ–≤—É—é –ú–æ—Å–∫–≤—É
- `moscow_no_zelenograd` - –ú–æ—Å–∫–≤–∞ –±–µ–∑ –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥–∞ (—Å –ù–æ–≤–æ–π –ú–æ—Å–∫–≤–æ–π)  
- `moscow_old_only` - —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä–∞—è –ú–æ—Å–∫–≤–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**üì∫ –ò—Å—Ç–æ—á–Ω–∏–∫–∏ (`media`):**
- `all` - –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–ê–í–ò–¢–û, –¶–ò–ê–ù, –Ø–Ω–¥–µ–∫—Å –∏ –¥—Ä.)
- `avito_only` - —Ç–æ–ª—å–∫–æ –ê–≤–∏—Ç–æ
- `cian_only` - —Ç–æ–ª—å–∫–æ –¶–ò–ê–ù

**üè† –ö–æ–º–Ω–∞—Ç—ã (`rooms`):**
- `all` - –≤—Å–µ —Ç–∏–ø—ã –∫–≤–∞—Ä—Ç–∏—Ä [1,2,3,4,5]
- `1k`, `2k`, `3k` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã
- `[0]` - —Ç–æ–ª—å–∫–æ —Å—Ç—É–¥–∏–∏
- `[0,1]` - —Å—Ç—É–¥–∏–∏ –∏ 1–∫
- `[1,2,3]` - –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç

**üé® –°—Ç—É–¥–∏–∏ (`studio`):** *(–¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ API)*
- `all` - –≤—Å–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤–∫–ª—é—á–∞—è —Å—Ç—É–¥–∏–∏
- `studio_only` - —Ç–æ–ª—å–∫–æ —Å—Ç—É–¥–∏–∏
- `no_studio` - –∏—Å–∫–ª—é—á–∏—Ç—å —Å—Ç—É–¥–∏–∏

**üè¢ –¢–∏–ø –∑–¥–∞–Ω–∏—è (`building_type`):**
- `old_only` - —Ç–æ–ª—å–∫–æ –≤—Ç–æ—Ä–∏—á–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `new_only` - —Ç–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏
- `all` - –≤—Å–µ —Ç–∏–ø—ã –∑–¥–∞–Ω–∏–π

**üë§ –¢–∏–ø –ø—Ä–æ–¥–∞–≤—Ü–∞ (`seller_type`):**
- `all` - –≤—Å–µ –ø—Ä–æ–¥–∞–≤—Ü—ã (—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏ + –∞–≥–µ–Ω—Ç—ã)
- `owner_only` - —Ç–æ–ª—å–∫–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏

**üìä –°—Ç–∞—Ç—É—Å —Å–¥–µ–ª–∫–∏ (`deal_status`):**
- `active` - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `inactive` - —Ç–æ–ª—å–∫–æ —Å–Ω—è—Ç—ã–µ/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `all` - –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–∞–∫—Ç–∏–≤–Ω—ã–µ –∏ —Å–Ω—è—Ç—ã–µ)

**üí∞ –¶–µ–Ω—ã:**
- `min_price` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö
- `max_price` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `public.ads_w7` (30+ –ø–æ–ª–µ–π)

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:**
```sql
CREATE TABLE public.ads_w7 (
    id integer PRIMARY KEY,              -- w6_offer_id –∏–∑ API
    url text,                           -- –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
    price bigint,                       -- –¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö
    rooms smallint,                     -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç
    area numeric,                       -- –û–±—â–∞—è –ø–ª–æ—â–∞–¥—å
    floor smallint,                     -- –≠—Ç–∞–∂
    total_floors smallint,              -- –≠—Ç–∞–∂–µ–π –≤ –¥–æ–º–µ
    address text,                       -- –ê–¥—Ä–µ—Å (—É–ª–∏—Ü–∞ + –¥–æ–º)
    
    -- –ü—Ä–æ–¥–∞–≤–µ—Ü
    person_type smallint,               -- 1-–ß–∞—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ, 2-–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ, 3-–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫  
    person text,                        -- –ò–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞
    
    -- –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
    metro_id smallint,                  -- ID —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ
    district_id smallint,               -- ID —Ä–∞–π–æ–Ω–∞
    
    -- –î–µ—Ç–∞–ª–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã  
    ceiling_height smallint,            -- –í—ã—Å–æ—Ç–∞ –ø–æ—Ç–æ–ª–∫–æ–≤ (—Å–º)
    balcony_type_id smallint,          -- –¢–∏–ø –±–∞–ª–∫–æ–Ω–∞
    kitchen_square numeric(5,2),        -- –ü–ª–æ—â–∞–¥—å –∫—É—Ö–Ω–∏
    life_square numeric(5,2),          -- –ñ–∏–ª–∞—è –ø–ª–æ—â–∞–¥—å
    
    -- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–¥–∞–Ω–∏–∏
    built_year smallint,                -- –ì–æ–¥ –ø–æ—Å—Ç—Ä–æ–π–∫–∏
    building_batch_name text,           -- –°–µ—Ä–∏—è –¥–æ–º–∞
    walls_material_type_id smallint,    -- –ú–∞—Ç–µ—Ä–∏–∞–ª —Å—Ç–µ–Ω
    
    -- –°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–ª—è
    created_at timestamp,               -- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
    source_created timestamp,           -- –í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
    proc_at timestamp,                  -- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    processed boolean DEFAULT false,
    images jsonb                        -- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö (null - –Ω–µ—Ç —Å—Å—ã–ª–æ–∫ –≤ API)
);
```

## üìà –ü—Ä–∏–º–µ—Ä—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–°–∫—Ä–∏–ø—Ç—ã –≤—ã–≤–æ–¥—è—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

```
üéâ –£–°–ü–ï–®–ù–û –°–û–•–†–ê–ù–ï–ù–û 10 –û–ë–™–Ø–í–õ–ï–ù–ò–ô –û–¢ –°–û–ë–°–¢–í–ï–ù–ù–ò–ö–û–í!
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤:
   –° –∏–º–µ–Ω–∞–º–∏: 2/10
   –ë–µ–∑ –∏–º–µ–Ω: 8/10
üìù –ü—Ä–∏–º–µ—Ä—ã –∏–º–µ–Ω:
   - –ù–æ–≤–∏–∫ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
   - –ê–Ω–≥–µ–ª–∏–Ω–∞
üí∞ –¶–µ–Ω–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: 17,640,000 —Ä—É–±
   –ú–∏–Ω —Ü–µ–Ω–∞: 6,700,000 —Ä—É–±
   –ú–∞–∫—Å —Ü–µ–Ω–∞: 38,000,000 —Ä—É–±
üìê –°—Ä–µ–¥–Ω—è—è –ø–ª–æ—â–∞–¥—å: 36.7 –º¬≤
üèóÔ∏è –ì–æ–¥—ã –ø–æ—Å—Ç—Ä–æ–π–∫–∏: 1906-2019 (—Å—Ä–µ–¥–Ω–µ–µ: 1978)
```

## ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ 401/403 - –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω API"
**–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã `WSCG` –∏ `WSCT` (—Å–º. —Ä–∞–∑–¥–µ–ª "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ")

### –ü—Ä–æ–±–ª–µ–º–∞: "UUID –≤ –ø–æ–ª–µ avitoid"
```bash
‚ùå invalid input for query argument $3: 'ce71cd06-d0f6-4812-8505-757b74755c5f'
```
**–†–µ—à–µ–Ω–∏–µ**: –í `save_to_ads_w7.py` —Å—Ç—Ä–æ–∫–∞ 222 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ `avitoid: None` (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Ç —Å—Å—ã–ª–æ–∫ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
**–û—Ç–≤–µ—Ç**: –í MLS API –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —Å—á–µ—Ç—á–∏–∫–∏ `photo_count`, `video_count`. –°—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î"
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ —Ñ–∞–π–ª–µ `.env`

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∞:
```bash
# Cron –∑–∞–¥–∞—á–∞ - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00
0 3 * * * cd /path/to/mrealty && python save_owners_10.py

# –ò–ª–∏ –º–∞—Å—Å–æ–≤—ã–π —Å–±–æ—Ä —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
0 2 * * 1 cd /path/to/mrealty && python collect_moscow_pages.py
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤:
**–ï–∂–µ–¥–Ω–µ–≤–Ω–æ**: –û–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ `WSCG` –≤ `flexible_collector.py` (WSCT –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ `WSCG`
2. ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞ w7.baza-winner.ru
3. ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î PostgreSQL (ads_w7 —Ç–∞–±–ª–∏—Ü–∞)
4. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:**
- ‚úÖ –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ `--days` –∏ `--rooms`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç—É–¥–∏–π —á–µ—Ä–µ–∑ `--rooms 0`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—è `person` (—É–¥–∞–ª–µ–Ω–∏–µ "–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ" –∏ –æ–±—Ä–µ–∑–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ —Å—Ç–µ–Ω (1,2‚Üí1 –ø–∞–Ω–µ–ª—å–Ω—ã–π; 3,11‚Üí3 –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π; 4,5‚Üí2 –∫–∏—Ä–ø–∏—á–Ω—ã–π; –æ—Å—Ç–∞–ª—å–Ω—ã–µ‚Üínull)
- ‚úÖ **–ù–æ–≤–æ–µ**: –ü–æ–∏—Å–∫ —Å–Ω—è—Ç—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ `--inactive`

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞:**
- `location="moscow_old_only"` - –∏—Å–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ä–∞–π–æ–Ω—ã
- `building_type="old_only"` - —Ñ–æ–∫—É—Å –Ω–∞ –≤—Ç–æ—Ä–∏—á–Ω–æ–º —Ä—ã–Ω–∫–µ
- `size=400` - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `seller_type="owner_only"` - –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤

