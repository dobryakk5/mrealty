# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∞–¥—Ä–µ—Å–∞ –∏ —Ç–µ–≥–æ–≤

## üìã **–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –ø–∞—Ä—Å–µ—Ä–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –≥—Ä–∞–Ω–∏—Ü –º–µ–∂–¥—É —Ç–µ–≥–∞–º–∏ –∏ –∞–¥—Ä–µ—Å–æ–º. –í –∞–¥—Ä–µ—Å –º–æ–≥–ª–∏ –ø–æ–ø–∞–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–ø—è—Ç—ã–µ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞—Ä—Å–∏–ª–∏—Å—å —Ç–µ–≥–∏.

### **–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```
77 966 246 ‚ÇΩ
1 179 520 ‚ÇΩ –∑–∞ –º¬≤
–†—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞
–ü–æ–≤–∞—Ä—Å–∫–∞—è —É–ª., 8/1–∫1
–ê—Ä–±–∞—Ç—Å–∫–∞—è, –¥–æ 5 –º–∏–Ω.
```

**–°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∞ –≥—Ä–∞–Ω–∏—Ü—ã, —Ç–µ–≥–∏ –º–æ–≥–ª–∏ —Å–º–µ—à–∏–≤–∞—Ç—å—Å—è —Å –∞–¥—Ä–µ—Å–æ–º.

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:** –ß–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Ç–µ–≥–∏ –∏ –∞–¥—Ä–µ—Å –ø–æ –º–∞—Ä–∫–µ—Ä–∞–º.

## üõ†Ô∏è **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### **1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `parse_tags_from_params`**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `found_metro_line` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ü–∞ —Ç–µ–≥–æ–≤
- –¢–µ–≥–∏ —Ç–µ–ø–µ—Ä—å –±–µ—Ä—É—Ç—Å—è **–æ—Ç —Å—Ç—Ä–æ–∫–∏ "–∑–∞ –º¬≤" –¥–æ —Å—Ç—Ä–æ–∫–∏ —Å –º–µ—Ç—Ä–æ**
- –ò—Å–∫–ª—é—á–∞—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∞–¥—Ä–µ—Å (–º–µ—Ç—Ä–æ)

**–õ–æ–≥–∏–∫–∞:**
```python
# –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ —Å —Ü–µ–Ω–æ–π –∏—â–µ–º —Ç–µ–≥–∏ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫–∞—Ö
if found_price_line and not found_metro_line:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ –∞–¥—Ä–µ—Å–æ–º (—Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç—Ä–æ)
    if self.is_metro_line(line):
        found_metro_line = True
        break
    
    # –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –∞–¥—Ä–µ—Å, –ø—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–æ–π —Ç–µ–≥–æ–º
    # ... –ø–∞—Ä—Å–∏–Ω–≥ —Ç–µ–≥–æ–≤
```

### **2. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `is_address_line` –≤ `is_metro_line`**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –§—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫ —Å –º–µ—Ç—Ä–æ
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç–∞–Ω—Ü–∏—è "–ê—Ä–±–∞—Ç—Å–∫–∞—è" –≤ —Å–ø–∏—Å–æ–∫ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –º–µ—Ç—Ä–æ
- –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞

**–ü—Ä–∏–∑–Ω–∞–∫–∏ —Å—Ç—Ä–æ–∫–∏ —Å –º–µ—Ç—Ä–æ:**
1. –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Ç—Ä–æ (–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏)
2. –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Ä–µ–º—è –¥–æ –º–µ—Ç—Ä–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¥–æ 5 –º–∏–Ω.")
3. –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏—è —É–ª–∏—Ü

### **3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `parse_card`**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω fallback –ø–æ–∏—Å–∫ –∞–¥—Ä–µ—Å–∞ –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ `data-marker`
- –ê–¥—Ä–µ—Å –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –º–µ—Ç—Ä–æ
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —É–ª–∏—Ü—É/–¥–æ–º –∏ –º–µ—Ç—Ä–æ/–≤—Ä–µ–º—è

### **4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `prepare_data_for_db`**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ–º—É –∞–¥—Ä–µ—Å—É –∏–∑ `card_data['address']`
- Fallback –Ω–∞ `street_house` –µ—Å–ª–∏ –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –¢–µ–≥–∏ –∏ –∞–¥—Ä–µ—Å –º–æ–≥–ª–∏ —Å–º–µ—à–∏–≤–∞—Ç—å—Å—è
- –í –∞–¥—Ä–µ—Å –ø–æ–ø–∞–¥–∞–ª–∏ —Ç–æ–ª—å–∫–æ –∑–∞–ø—è—Ç—ã–µ
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **–¢–µ–≥–∏:** –ë–µ—Ä—É—Ç—Å—è –æ—Ç "–∑–∞ –º¬≤" –¥–æ —Å—Ç—Ä–æ–∫–∏ —Å –º–µ—Ç—Ä–æ
- **–ê–¥—Ä–µ—Å:** –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ —Å—Ç—Ä–æ–∫ —Å –º–µ—Ç—Ä–æ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —Å—Ç—Ä–æ–∫–∏)
- **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ:** –¢–µ–≥–∏ –∏ –∞–¥—Ä–µ—Å –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è

### **–ü—Ä–∏–º–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

**–°–ª—É—á–∞–π 1: –° —Ç–µ–≥–æ–º**
```
77 966 246 ‚ÇΩ
1 179 520 ‚ÇΩ –∑–∞ –º¬≤
–†—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞          ‚Üê –¢–ï–ì
–ü–æ–≤–∞—Ä—Å–∫–∞—è —É–ª., 8/1–∫1   ‚Üê –ê–î–†–ï–° (—É–ª–∏—Ü–∞, –¥–æ–º)
–ê—Ä–±–∞—Ç—Å–∫–∞—è, –¥–æ 5 –º–∏–Ω.   ‚Üê –ê–î–†–ï–° (–º–µ—Ç—Ä–æ, –≤—Ä–µ–º—è)
```

**–°–ª—É—á–∞–π 2: –ë–µ–∑ —Ç–µ–≥–æ–≤**
```
77 966 246 ‚ÇΩ
1 179 520 ‚ÇΩ –∑–∞ –º¬≤
–ü–æ–≤–∞—Ä—Å–∫–∞—è —É–ª., 8/1–∫1   ‚Üê –ê–î–†–ï–° (—É–ª–∏—Ü–∞, –¥–æ–º)
–ê—Ä–±–∞—Ç—Å–∫–∞—è, –¥–æ 5 –º–∏–Ω.   ‚Üê –ê–î–†–ï–° (–º–µ—Ç—Ä–æ, –≤—Ä–µ–º—è)
```

**–°–ª—É—á–∞–π 3: –° –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–µ–≥–∞–º–∏**
```
77 966 246 ‚ÇΩ
1 179 520 ‚ÇΩ –∑–∞ –º¬≤
–†—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞          ‚Üê –¢–ï–ì
–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫            ‚Üê –¢–ï–ì
–ü–æ–≤–∞—Ä—Å–∫–∞—è —É–ª., 8/1–∫1   ‚Üê –ê–î–†–ï–° (—É–ª–∏—Ü–∞, –¥–æ–º)
–ê—Ä–±–∞—Ç—Å–∫–∞—è, –¥–æ 5 –º–∏–Ω.   ‚Üê –ê–î–†–ï–° (–º–µ—Ç—Ä–æ, –≤—Ä–µ–º—è)
```

## üîç **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

### **–§—É–Ω–∫—Ü–∏—è `is_metro_line`:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –º–µ—Ç—Ä–æ, –≤—Ä–µ–º–µ–Ω–∏ –∏ —É–ª–∏—Ü
- –¢—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 2 –ø—Ä–∏–∑–Ω–∞–∫–∞ –∞–¥—Ä–µ—Å–∞
- –ò—Å–∫–ª—é—á–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫–≤–∞—Ä—Ç–∏—Ä –∏ –¥–ª–∏–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è

### **–§—É–Ω–∫—Ü–∏—è `parse_tags_from_params`:**
- –ò—â–µ—Ç —Å—Ç—Ä–æ–∫—É "–∑–∞ –º¬≤" –∫–∞–∫ –º–∞—Ä–∫–µ—Ä –Ω–∞—á–∞–ª–∞ —Ç–µ–≥–æ–≤
- –ü–∞—Ä—Å–∏—Ç —Ç–µ–≥–∏ –¥–æ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —Å –º–µ—Ç—Ä–æ
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ, —Ç–∞–∫ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏

### **–§—É–Ω–∫—Ü–∏—è `parse_address_from_params`:**
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∞–¥—Ä–µ—Å –∏–∑ —Å—Ç—Ä–æ–∫ —Å –º–µ—Ç—Ä–æ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –æ–¥–Ω—É, —Ç–∞–∫ –∏ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –∞–¥—Ä–µ—Å–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –≤ –Ω—É–∂–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

## üìù **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç:
1. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** —Ç–µ–≥–æ–≤ –∏ –∞–¥—Ä–µ—Å–∞
2. **–ù–∞–¥–µ–∂–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ** –∞–¥—Ä–µ—Å–∞ –∏–∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
3. **–ì–∏–±–∫–æ—Å—Ç—å** –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å —Ä–∞–∑–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–µ–≥–æ–≤
4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π –ø–∞—Ä—Å–∏–Ω–≥–∞

–¢–µ–ø–µ—Ä—å –ø–∞—Ä—Å–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–∞–∫ —Ç–µ–≥–∏, —Ç–∞–∫ –∏ –∞–¥—Ä–µ—Å.
